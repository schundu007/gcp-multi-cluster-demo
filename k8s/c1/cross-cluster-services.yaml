# Cross-cluster service proxies - these services in C1 point to ILBs in C2
# This allows the frontend to use Kubernetes service discovery
---
apiVersion: v1
kind: Service
metadata:
  name: userservice
  namespace: bank-of-anthos
spec:
  type: ClusterIP
  ports:
    - port: 8085
      targetPort: 8085
---
apiVersion: v1
kind: Endpoints
metadata:
  name: userservice
  namespace: bank-of-anthos
subsets:
  - addresses:
      - ip: 10.1.10.10
    ports:
      - port: 8085
---
apiVersion: v1
kind: Service
metadata:
  name: contacts
  namespace: bank-of-anthos
spec:
  type: ClusterIP
  ports:
    - port: 8085
      targetPort: 8085
---
apiVersion: v1
kind: Endpoints
metadata:
  name: contacts
  namespace: bank-of-anthos
subsets:
  - addresses:
      - ip: 10.1.10.11
    ports:
      - port: 8085
---
apiVersion: v1
kind: Service
metadata:
  name: balancereader
  namespace: bank-of-anthos
spec:
  type: ClusterIP
  ports:
    - port: 8085
      targetPort: 8085
---
apiVersion: v1
kind: Endpoints
metadata:
  name: balancereader
  namespace: bank-of-anthos
subsets:
  - addresses:
      - ip: 10.1.10.12
    ports:
      - port: 8085
---
apiVersion: v1
kind: Service
metadata:
  name: transactionhistory
  namespace: bank-of-anthos
spec:
  type: ClusterIP
  ports:
    - port: 8085
      targetPort: 8085
---
apiVersion: v1
kind: Endpoints
metadata:
  name: transactionhistory
  namespace: bank-of-anthos
subsets:
  - addresses:
      - ip: 10.1.10.13
    ports:
      - port: 8085
---
apiVersion: v1
kind: Service
metadata:
  name: ledgerwriter
  namespace: bank-of-anthos
spec:
  type: ClusterIP
  ports:
    - port: 8085
      targetPort: 8085
---
apiVersion: v1
kind: Endpoints
metadata:
  name: ledgerwriter
  namespace: bank-of-anthos
subsets:
  - addresses:
      - ip: 10.1.10.14
    ports:
      - port: 8085
